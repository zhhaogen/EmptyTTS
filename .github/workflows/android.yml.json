{
    "name": "Android CI",
    "on": {
        "push": {
            "branches": [
                "main"
            ]
        },
        "pull_request": {
            "branches": [
                "main"
            ]
        }
    },
    "jobs": {
        "build": {
            "runs-on": "ubuntu-latest",
            "steps": [
                {
                    "uses": "actions/checkout@v3"
                },
                {
                    "uses": "actions/setup-java@v3",
                    "with": {
                        "distribution": "temurin",
                        "java-version": 17
                    }
                },
                {
                    "uses": "gradle/gradle-build-action@v2",
                    "id": "setup-gradle",
                    "with": {
                        "gradle-version": "release-candidate"
                    }
                },
                {
                    "run": "gradle build"
                },
                {
                    "run": "ls -R |grep .apk"
                },
                {
                    "uses": "ncipollo/release-action@v1",
                    "with":{
                        "allowUpdates":true,
                        "body":"最新自动打包",
                        "artifacts":"./app/build/outputs/apk/debug/app-debug.apk,./testapp/build/outputs/apk/debug/testapp-debug.apk"
                    }
                },
                {
                    "run": "echo \"ok\""
                }
            ]
        }
    }
}